<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{thymeleaf/layout/profile}">
<head>
    <title>쿠폰함</title>
    <script src="/js/member/addressCreatePopup.js"></script>
    <link href="/css/coupon/couponStyle.css" rel="stylesheet">
</head>

<th:block layout:fragment="content">

        <div class="card-header">
            <ul class="nav nav-tabs card-header-tabs" data-bs-toggle="tabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <a href="#tabs-home-7" class="nav-link active" data-bs-toggle="tab" aria-selected="true" role="tab">사용 가능</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a href="#tabs-profile-7" class="nav-link" data-bs-toggle="tab" aria-selected="false" role="tab" tabindex="-1">사용 불가능</a>
                </li>
            </ul>
        </div>
        <div class="card-body">
            <div class="tab-content">
                <div class="tab-pane active show" id="tabs-home-7" role="tabpanel">
                    <div th:if="${#lists.isEmpty(unusedList)}">
                        <div>
                            <div>소유한 쿠폰이 없습니다.</div>
                            <a href="/coupon-zone">쿠폰 받으러 가기</a>
                        </div>
                    </div>

                    <div th:unless="${#lists.isEmpty(unusedList)}">
                        <th:block th:each="item, itemStat : ${unusedList}">
                                <div class="coupon-card fl-left mb-3">
                                    <div class="date">
                                        <time>
                                            <span th:if="${#strings.contains(item.couponType, '정률')}">
                                                <span th:text="${#strings.concat(item.amount, '%')}"></span>
                                            </span>
                                            <span th:unless="${#strings.contains(item.couponType, '정률')}">
                                                <span th:text="${#strings.concat(item.amount, '₩')}"></span>
                                            </span>
                                        </time>
                                    </div>
                                    <section class="card-cont">
                                        <h3 th:text="${item.name}"></h3>
                                        <div class="even-info">
                                            <i class="fa fa-calendar"></i>
                                            <time>
                                                <span>
                                                    <span>최대 </span>
                                                    <span th:text="${item.maximumDiscountAmount}"></span>
                                                    <span>원 할인</span>
                                                </span><br/>
                                                <span th:if="${item.expiredAt == null}">
                                                    기간 무제한
                                                </span>
                                                <span th:if="${item.expiredAt != null}">
                                                    <span th:text="${#temporals.format(item.expiredAt, 'yyyy년 MM월 dd일 HH:mm:ss')}"></span>
                                                    <span>까지 사용 가능</span>
                                                </span>
                                            </time>
                                        </div>
                                        <div class="even-info">
                                            <i class="fa fa-map-marker"></i>
                                            <p>
                                                <span th:if="${#strings.contains(item.couponType, '포인트')}">
                                                    <span>[내 포인트] - [포인트 충전소]에서 이용해주세요.</span><br/>
                                                </span>
                                                <span th:unless="${#strings.contains(item.couponType, '포인트')}">
                                                    <span>최소 사용 금액 : </span>
                                                    <span th:text="${item.minimumUseAmount}"></span>
                                                    <span>원</span>
                                                </span>
                                            </p>
                                        </div>
                                        <span>
                                            <a class="able" th:text="${item.reason}"></a>
                                        </span>
                                    </section>
                                </div>
                                <span th:if="${itemStat.count%2==0}"><br/></span>
                        </th:block>
                    </div>
                </div>

                <div class="tab-pane" id="tabs-profile-7" role="tabpanel">
                    <div th:if="${#lists.isEmpty(usedList)}">
                        <div>
                            <div>사용 불가능한 쿠폰은 없습니다.</div>
                            <a href="/coupon-zone">쿠폰 받으러 가기</a>
                        </div>
                    </div>

                    <div th:unless="${#lists.isEmpty(usedList)}">
                        <th:block th:each="item, itemStat : ${usedList}">
                                <div class="coupon-card fl-left mb-3">
                                    <div class="date">
                                        <time>
                                            <span th:if="${#strings.contains(item.couponType, '정률')}">
                                                <span th:text="${#strings.concat(item.amount, '%')}"></span>
                                            </span>
                                            <span th:unless="${#strings.contains(item.couponType, '정률')}">
                                                <span th:text="${#strings.concat(item.amount, '₩')}"></span>
                                            </span>
                                        </time>
                                    </div>
                                    <section class="card-cont">
                                        <h3 th:text="${item.name}"></h3>
                                        <div class="even-info">
                                            <i class="fa fa-calendar"></i>
                                            <time>
                                                <span>
                                                    <span>최대 </span>
                                                    <span th:text="${item.maximumDiscountAmount}"></span>
                                                    <span>원 할인</span>
                                                </span><br/>
                                                <span th:if="${item.expiredAt == null}">
                                                    기간 무제한
                                                </span>
                                                <span th:if="${item.expiredAt != null}">
                                                    <span th:text="${#temporals.format(item.expiredAt, 'yyyy년 MM월 dd일 HH:mm:ss')}"></span>
                                                    <span>까지 사용 가능</span>
                                                </span>
                                            </time>
                                        </div>
                                        <div class="even-info">
                                            <i class="fa fa-map-marker"></i>
                                            <p>
                                                <span th:if="${#strings.contains(item.couponType, '포인트')}">
                                                    <span>[내 포인트] - [포인트 충전소]</span>
                                                    <span>포인트로 전환할 수 있습니다.</span>
                                                </span>
                                                <span th:unless="${#strings.contains(item.couponType, '포인트')}">
                                                    <span>최소 사용 금액 : </span>
                                                    <span th:text="${item.minimumUseAmount}"></span>
                                                    <span>원</span>
                                                </span>
                                            </p>
                                        </div>
                                        <span>
                                            <a class="disable" th:text="${item.reason}"></a>
                                        </span>
                                    </section>
                                </div>
                                <span th:if="${itemStat.count%2==0}"><br/></span>
                        </th:block>
                </div>
            </div>
        </div>
    </div>
</th:block>